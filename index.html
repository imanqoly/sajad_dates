<!DOCTYPE html>
<html lang="en">

<head>
  <meta charset="UTF-8">
  <link rel="stylesheet" href="./css/style.css">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <script>
    function getLang() {
      const params = new URLSearchParams(window.location.search);
      return params.get('lang') || 'en'; // default to English
    }
    const lang = getLang();
  </script>
  <title>Sajad Dates - Catalogue </title>

  <style>
    .lang-switch { margin-top: .75rem; }

.lang-switch{
  display:flex;
  gap:.5rem;
  align-items:center;
}
.lang-switch a{
  display:inline-flex;
  align-items:center;
  justify-content:center;
  line-height:0;
  padding:2px;
  border-radius:8px;
  background:rgba(255,255,255,.06);
  border:1px solid rgba(255,255,255,.18);
  transition:transform .15s ease, background .15s ease, border-color .15s ease;
}
.lang-switch a:hover{ transform:translateY(-1px); background:rgba(255,255,255,.1) }
.lang-switch a.active{ outline:2px solid #9ad0ff; background:rgba(154,208,255,.12) }
.lang-switch .flag{ width:28px; height:20px; display:block; border-radius:4px; overflow:hidden }


    /* === Footer hard overrides for debug === */
    .map-embed{
  margin-top: 1rem;
  border-radius: 12px;
  overflow: hidden;
  border: 1px solid rgba(255,255,255,.12);
  background: #1e1e1e;
  /* responsive box */
  aspect-ratio: 16 / 9;
}
.map-embed iframe{
  width: 100%;
  height: 100%;
  border: 0;
  display: block;
}
@media (min-width: 960px){
  .map-embed{ aspect-ratio: 16 / 10; }
}

    .site-footer {
      direction: rtl;
      position: relative;
      z-index: 2;
      /* sit above any pinned content */
      background: #2b2b2b !important;
      /* force dark gray bg */
      color: #eaeaea !important;
      padding: 32px 20px !important;
      /* explicit height via padding */
      margin-top: 40px;
      border-top: 1px solid rgba(255, 255, 255, .08);
      font-family: inherit;
    }

    .site-footer .footer-wrap {
      max-width: 1200px;
      margin-inline: auto;
      display: flex;
      gap: 20px;
      flex-wrap: wrap;
      align-items: flex-start;
      justify-content: space-between;
    }

    .site-footer .info-list {
      list-style: none;
      margin: 0;
      padding: 0;
      display: grid;
      gap: 10px;
    }

    .site-footer .info-item {
      display: flex;
      align-items: flex-start;
      gap: 10px;
      line-height: 1.8;
      background: rgba(255, 255, 255, .06) !important;
      /* force li bg */
      border: 1px solid rgba(255, 255, 255, .12);
      border-radius: 12px;
      padding: 8px 10px;
    }

    /* Kill any global svg rules */
    .site-footer .icon {
      flex: 0 0 20px !important;
      width: 20px !important;
      height: 20px !important;
      display: inline-flex;
      align-items: center;
      justify-content: center;
      color: #8ad06b;
      margin-top: 2px;
    }

    .site-footer .icon svg {
      width: 16px !important;
      height: 16px !important;
      display: block !important;
      fill: currentColor !important;
      max-width: none !important;
    }

    .site-footer .text {
      color: #f3f3f3
    }

    .site-footer .text a {
      color: #9ad0ff;
      text-decoration: none
    }

    .site-footer .text a:hover {
      text-decoration: underline
    }

    /* back to top_________________________________ */
    .back-to-top{
      position: fixed;
  inset-block-end: 20px;      /* bottom */
  inset-inline-end: 20px;     /* right in LTR, left in RTL */
  z-index: 1000;              /* above pinned sections */
  width: 44px;
  height: 44px;
  border-radius: 9999px;
  background: #2b2b2b;        /* dark gray to match footer */
  color: #ffffff;
  border: 1px solid rgba(255,255,255,.18);
  box-shadow: 0 6px 16px rgba(0,0,0,.25);
  display: inline-flex;
  align-items: center;
  justify-content: center;
  cursor: pointer;
  
  /* hidden by default */
  opacity: 0;
  visibility: hidden;
  transform: translateY(12px) scale(.96);
  transition: opacity .2s ease, transform .2s ease, visibility .2s;
}
.back-to-top svg{ display:block; width:18px; height:18px }
.back-to-top:hover{ transform: translateY(8px) scale(1); background:#343434 }
.back-to-top:active{ transform: translateY(10px) scale(.98) }
.back-to-top:focus-visible{ outline:2px solid #9ad0ff; outline-offset:2px }

/* visible state */
.back-to-top.show{
  opacity: 1;
  visibility: visible;
  transform: translateY(0) scale(1);
}
/* Back to top >______________________________________________*/

/* Optional: tighter on narrow screens */
@media (max-width:480px){
  .back-to-top{ inset-block-end: 14px; inset-inline-end: 14px; width:40px; height:40px }
}


    /* Brand block */
    .site-footer .footer-brand {
      min-width: 240px;
      max-width: 320px;
      text-align: center
    }

    .site-footer .brand-logo {
      width: 140px;
      height: auto;
      margin-bottom: 8px
    }

    .site-footer .brand-note {
      color: #cfcfcf
    }

    /* Bottom bar */
    .site-footer .footer-bottom {
      margin-top: 20px;
      text-align: center;
      color: #c7c7c7;
      font-size: .9rem;
    }
  </style>


</head>

<body>
  <main>
    <nav id="lang-switch-top" class="lang-switch" aria-label="Website language"></nav>

    <ul class='parallax'>
      <li class='layer'></li>
      <li class='layer'></li>
      <li class='layer'></li>
      <li class='layer'></li>
      <li class='layer'></li>
      <li class='layer'></li>
      <li class='layer'></li>
      <li class='layer'></li>
    </ul>
    <article id='history' class='history'>
      <h1 id="history-title"></h1>
      <p id="history-text"></p>
    </article>
    <article id='KeyFeatures' class='KeyFeatures'>

    </article>
  </main>
  <section class="sectionpre">
    <div class="sectionbg">
      <div class="heritage-container sec">
        <h4 id="features-title"></h4>
        <ul class="features-list"></ul>
      </div>

      <div class="sec"></div>
      <div class="sec">
        <h4 id="advantage-title"></h4>
        <ul id="advantage-text"></ul>
      </div>
      <div class="sec">
        <h4 id="idealfor-title"></h4>
        <ul class="idealfor-text"></ul>
      </div>
    </div>

  </section>
  <section class="splservtitlebase">
    <div class="splservtitle">
      <h2 id="spl-title"></h2>
      <h4 id="spl-chant"></h4>
      <p id="spl-text"></p>
    </div>

  </section>
  <div class="container">


    <section class="section">
      <div class="innersecspl">
        <div class="spltxt">
          <h2 id="Supply-t">The Second slide</h2>
          <p id="Supply-p">Scroll Down for next slide</p>
        </div>
        <div class="splimg"></div>
      </div>

    </section>
    <section class="section">
      <div class="innersecspl">
        <div class="spltxt">
          <h2 id="Bulk-t">The Second slide</h2>
          <p id="Bulk-p">Scroll Down for next slide</p>
        </div>
        <div class="splimg"></div>
      </div>

    </section>
    <section class="section">
      <div class="innersecspl">
        <div class="spltxt">
          <h2 id="Custom-t">The Second slide</h2>
          <p id="Custom-p">Scroll Down for next slide</p>
        </div>
        <div class="splimg"></div>
      </div>

    </section>
    <section class="section">
      <div class="innersecspl">
        <div class="spltxt">
          <h2 id="Precise-t">The Second slide</h2>
          <p id="Precise-p">Scroll Down for next slide</p>
        </div>
        <div class="splimg"></div>
      </div>

    </section>
    <section class="section">
      <div class="innersecspl">
        <div class="spltxt">
          <h2 id="Quality-t">The Second slide</h2>
          <p id="Quality-p">Scroll Down for next slide</p>
        </div>
        <div class="splimg"></div>
      </div>

    </section>
    <section class="section">
      <div class="innersecspl">
        <div class="spltxt">
          <h2 id="Logistics-t">The Second slide</h2>
          <p id="Logistics-p">Scroll Down for next slide</p>
        </div>
        <div class="splimg"></div>
      </div>

    </section>
    <section class="section">
      <div class="innersecspl">
        <div class="spltxt">
          <h2 id="Distribution-t">The Second slide</h2>
          <p id="Distribution-p">Scroll Down for next slide</p>
        </div>
        <div class="splimg"></div>
      </div>

    </section>
    <section class="section">
      <div class="innersecspl">
        <div class="spltxt">
          <h2 id="Service-t">The Second slide</h2>
          <p id="Service-p">Scroll Down for next slide</p>
        </div>
        <div class="splimg"></div>
      </div>

    </section>
  </div>

  <section>

    <div class="l-cards" id="dates-cards-container"></div>



  </section>

  <footer class="site-footer" id="footer-root"></footer>


  <script>
    // set current year
    document.getElementById('year').textContent = new Date().getFullYear();
  </script>

<!-- Back to top -->
<button id="backToTop" class="back-to-top" aria-label="Back to top" title="Back to top">
  <!-- up arrow -->
  <svg viewBox="0 0 24 24" width="18" height="18" aria-hidden="true">
    <path fill="currentColor" d="M12 5.5a1 1 0 0 1 .7.3l6.5 6.5a1 1 0 1 1-1.4 1.4L13 9.9V19a1 1 0 1 1-2 0V9.9l-4.8 3.8a1 1 0 1 1-1.4-1.4l6.5-6.5a1 1 0 0 1 .7-.3Z"/>
  </svg>
</button>

</body>

<script>
  const layers = document.querySelectorAll('.layer');

  function parallax() {
    const y = window.scrollY;

    for (let i = 1; i < layers.length; i++) {
      const index = layers.length - i;
      const el = layers[index];

      // Basic vertical parallax
      let transform = `translateY(${(i * 0.1) * y}px)`;

      // Add rotation only to the 7th layer (last one)
      if (i === 2) {
        const rotateDeg = y * 0.05; // Tweak rotation speed here
        transform += ` rotate(${rotateDeg}deg)`;
        const scale = Math.max(0.1, 1 - y / 1000); // Won't go below 0.5
        transform += ` scale(${scale})`;
      }

      el.style.transform = transform;
    }
  }

  window.addEventListener('scroll', parallax, false);
</script>
<script src="https://cdnjs.cloudflare.com/ajax/libs/gsap/3.12.2/gsap.min.js"></script>

<!-- GSAP ScrollTrigger plugin -->
<script src="https://cdnjs.cloudflare.com/ajax/libs/gsap/3.12.2/ScrollTrigger.min.js"></script>
<script>
  gsap.registerPlugin(ScrollTrigger);
  const cards = gsap.utils.toArray(".c-card");
  const lastCardIndex = cards.length - 1;

  // Crear el ScrollTrigger para la primera y última tarjeta
  const firstCardST = ScrollTrigger.create({
    trigger: cards[1],
    start: "center center"
  });

  const lastCardST = ScrollTrigger.create({
    trigger: cards[cards.length - 1],
    start: "center center"
  });

  // Iterar sobre cada tarjeta
  cards.forEach((card, index) => {
    const scale = index === lastCardIndex ? 1 : 0.5;
    const scaleDown = gsap.to(card, {
      scale: scale,
    });

    ScrollTrigger.create({
      trigger: card,
      start: "top top",
      end: () => lastCardST.start,
      pin: true,
      pinSpacing: false,
      scrub: 0.5,
      ease: "none",
      animation: scaleDown,
      toggleActions: "restart none none reverse"
    });
  });
</script>
<script>
  fetch(`sajadcontent.${lang}.json`)
    .then(res => res.json())
    .then(data => {
      document.body.setAttribute('dir', data.dir || 'ltr');
      document.getElementById('history-title').textContent = data.history.title;
      document.getElementById('history-text').textContent = data.history.text;
      document.getElementById('features-title').textContent = data.KeyFeatures.title;
      document.getElementById('advantage-title').textContent = data.Advantage.title;
      document.getElementById('advantage-text').textContent = data.Advantage.text;
      document.getElementById('idealfor-title').textContent = data.IdealFor.title;
      document.getElementById('spl-title').textContent = data.SpecializedServices.title;
      document.getElementById('spl-chant').textContent = data.SpecializedServices.chant;
      document.getElementById('spl-text').textContent = data.SpecializedServices.abstract;
      document.getElementById('Supply-t').textContent = data.SpecializedServices.items[0].title;
      document.getElementById('Supply-p').textContent = data.SpecializedServices.items[0].text;
      document.getElementById('Bulk-t').textContent = data.SpecializedServices.items[1].title;
      document.getElementById('Bulk-p').textContent = data.SpecializedServices.items[1].text;
      document.getElementById('Custom-t').textContent = data.SpecializedServices.items[2].title;
      document.getElementById('Custom-p').textContent = data.SpecializedServices.items[2].text;
      document.getElementById('Precise-t').textContent = data.SpecializedServices.items[3].title;
      document.getElementById('Precise-p').textContent = data.SpecializedServices.items[3].text;
      document.getElementById('Quality-t').textContent = data.SpecializedServices.items[4].title;
      document.getElementById('Quality-p').textContent = data.SpecializedServices.items[4].text;
      document.getElementById('Logistics-t').textContent = data.SpecializedServices.items[5].title;
      document.getElementById('Logistics-p').textContent = data.SpecializedServices.items[5].text;
      document.getElementById('Distribution-t').textContent = data.SpecializedServices.items[6].title;
      document.getElementById('Distribution-p').textContent = data.SpecializedServices.items[6].text;
      document.getElementById('Service-t').textContent = data.SpecializedServices.items[7].title;
      document.getElementById('Service-p').textContent = data.SpecializedServices.items[7].text;

      const featuresList = document.querySelector('.features-list');
      const idealList = document.querySelector('.idealfor-text');

      // Make sure it exists before using forEach
      if (data.KeyFeatures && Array.isArray(data.KeyFeatures.items)) {
        featuresList.innerHTML = ''; // Clear existing <li> if needed

        data.KeyFeatures.items.forEach(feature => {
          const li = document.createElement('li');
          li.textContent = feature;
          featuresList.appendChild(li);
        });
      }
      const labels = {
        en: {
          features: "Features",
          uses: "Uses",
          harvest_time: "Harvest Time",
          competitive_advantage: "Advantage",
          learn_more: "Learn More"
        },
        fa: {
          features: "ویژگی‌ها",
          uses: "موارد مصرف",
          harvest_time: "زمان برداشت",
          competitive_advantage: "مزیت رقابتی",
          learn_more: "بیشتر بدانید"
        },
        ru: {
          features: "функции",
          uses: "использует",
          harvest_time: "время сбора урожая",
          competitive_advantage: "конкурентное преимущество",
          learn_more: "learn_more"
        },
        ar: {
          features: "الخصائص",
          uses: "الاستخدامات",
          harvest_time: "وقت الحصاد",
          competitive_advantage: "الميزة التنافسية",
          learn_more: "المزيد من المعلومات"
        }

      };
      if (data.IdealFor && Array.isArray(data.IdealFor.items)) {
        idealList.innerHTML = ''; // Clear existing <li> if needed

        data.IdealFor.items.forEach(idealitem => {
          const li = document.createElement('li');
          li.textContent = idealitem;
          idealList.appendChild(li);
        });
      }
      // Load and insert cards
      const cardsContainer = document.querySelector('.l-cards');
      const varieties = data.datesTypes.varieties;
      cardsContainer.innerHTML = '';

      varieties.forEach(variety => {
        const card = document.createElement('div');
        card.classList.add('c-card');

        card.innerHTML = `
        <div class="c-card__description">
          <div class="c-card__tagline">${variety.origin}</div>
          <h1 class="c-card__title">${variety.name}</h1>
          <div class="c-card__excerpt">
            <strong>${labels[lang].features}:</strong> <span class="txtexc">${variety.features}</span><br>
            <strong>${labels[lang].uses}:</strong> <span class="txtexc">${variety.uses}</span><br>
            <strong>${labels[lang].harvest_time}:</strong><span class="txtexc"> ${variety.harvest_time}</span><br>
            <strong>${labels[lang].competitive_advantage}:</strong> <span class="txtexc">${variety.competitive_advantage}</span>
          </div>
          <div class="c-card__cta">
            <a href="#" onclick="event.preventDefault()">${labels[lang].learn_more}</a>
          </div>
        </div>
        <figure class="c-card__figure">
          <img src="${variety.image || 'placeholder.jpg'}" alt="${variety.name}">
        </figure>
      `;
        cardsContainer.appendChild(card);
      });


      // ✅ GSAP ScrollTrigger runs after cards are in DOM
      setupScrollTriggerEffects();
      const contactKey = Object.keys(data).find(k => k.trim().toLowerCase() === 'contact');
      const contact = contactKey ? data[contactKey] : null;

      renderFooter(contact, data.dir);
      renderLangSwitch('lang-switch-footer'); // call this AFTER renderFooter(...) so the node exists

    })
    .catch(err => console.error('Error loading JSON:', err));

  function setupScrollTriggerEffects() {
    // Important: refresh ScrollTrigger
    ScrollTrigger.refresh();

    const cards = gsap.utils.toArray(".c-card");
    const lastCardIndex = cards.length - 1;

    const firstCardST = ScrollTrigger.create({
      trigger: cards[1],
      start: "center center"
    });

    const lastCardST = ScrollTrigger.create({
      trigger: cards[lastCardIndex],
      start: "center center"
    });

    cards.forEach((card, index) => {
      const scale = index === lastCardIndex ? 1 : 0.5;
      const scaleDown = gsap.to(card, {
        scale: scale
      });

      ScrollTrigger.create({
        trigger: card,
        start: "top top",
        end: () => lastCardST.start,
        pin: true,
        pinSpacing: false,
        scrub: 0.5,
        ease: "none",
        animation: scaleDown,
        toggleActions: "restart none none reverse"
      });
    });
  }
</script>
<!-- back to top js--------------------------------------------------- -->

<script>
  (function(){
    const btn = document.getElementById('backToTop');
    if (!btn) return;

    const SHOW_AT = 400; // px scrolled before showing
    const prefersReduced = window.matchMedia('(prefers-reduced-motion: reduce)').matches;

    function toggleBtn(){
      if (window.scrollY > SHOW_AT) btn.classList.add('show');
      else btn.classList.remove('show');
    }

    // Smooth scroll to top (falls back if unsupported or reduced motion)
    function scrollToTop(){
      if (!prefersReduced && 'scrollBehavior' in document.documentElement.style){
        window.scrollTo({ top: 0, behavior: 'smooth' });
      } else {
        window.scrollTo(0, 0);
      }
      // In GSAP-heavy pages, a quick refresh helps after big jumps
      if (window.ScrollTrigger && typeof ScrollTrigger.refresh === 'function'){
        setTimeout(() => ScrollTrigger.refresh(), 350);
      }
    }

    window.addEventListener('scroll', toggleBtn, { passive: true });
    btn.addEventListener('click', (e) => { e.preventDefault(); scrollToTop(); });

    // Initial state
    toggleBtn();
  })();
</script>


<!-- back to top js---------------------------------------------------END -->

<!-- language switcher -->
<script>
  // Simple SVG “flags”
  function svgEN(){
    return `
      <svg viewBox="0 0 28 20" class="flag" aria-hidden="true">
        <rect width="28" height="20" rx="4" fill="#0a3161"></rect>
        <text x="14" y="13" text-anchor="middle" font-size="10" font-family="system-ui,Segoe UI,Arial" fill="#fff" font-weight="700">EN</text>
      </svg>`;
  }
  function svgFA(){
    return `
      <svg viewBox="0 0 28 20" class="flag" aria-hidden="true">
        <rect width="28" height="20" rx="4" fill="#da0000"></rect>
        <rect width="28" height="13.333" y="0" rx="4" fill="#239f40"></rect>
        <rect width="28" height="6.667" y="6.667" fill="#ffffff"></rect>
      </svg>`;
  }
  function svgRU(){
    return `
      <svg viewBox="0 0 28 20" class="flag" aria-hidden="true">
        <rect width="28" height="20" rx="4" fill="#d52b1e"></rect>
        <rect width="28" height="13.333" y="0" rx="4" fill="#ffffff"></rect>
        <rect width="28" height="6.667" y="6.667" fill="#1c57a7"></rect>
      </svg>`;
  }
  function svgAR(){
    return `
      <svg viewBox="0 0 28 20" class="flag" aria-hidden="true">
        <rect width="28" height="20" rx="4" fill="#1aa049"></rect>
        <text x="14" y="13" text-anchor="middle" font-size="10" font-family="system-ui,Segoe UI,Arial" fill="#ffffff" font-weight="700">AR</text>
      </svg>`;
  }

  const LANGS = [
    { code: 'en', title: 'English',  svg: svgEN },
    { code: 'fa', title: 'فارسی',     svg: svgFA },
    { code: 'ru', title: 'Русский',   svg: svgRU },
    { code: 'ar', title: 'العربية',   svg: svgAR },
  ];

  // Build URL with the new ?lang=
  function langUrl(code){
    const u = new URL(window.location.href);
    u.searchParams.set('lang', code);
    return u.toString();
  }

  // Render a row of flags into a container id
  function renderLangSwitch(containerId){
    const host = document.getElementById(containerId);
    if (!host) return;

    // 'lang' should already be set in your page; fallback to 'en'
    const current = (window.lang || 'en').toLowerCase();

    host.innerHTML = LANGS.map(({code, title, svg}) => {
      const href = langUrl(code);
      const active = code === current ? 'active' : '';
      return `<a href="${href}" class="${active}" title="${title}" aria-label="${title}">${svg()}</a>`;
    }).join('');
  }
</script>
<script>
  renderLangSwitch('lang-switch-top');
  
</script>


<script>
  // Small inline SVGs (16px) mapped by "type" from your JSON
  const FOOTER_ICONS = {
    address: '<svg viewBox="0 0 24 24" width="16" height="16"><path fill="currentColor" d="M12 2a7 7 0 0 0-7 7c0 5.25 7 13 7 13s7-7.75 7-13a7 7 0 0 0-7-7Zm0 9.5A2.5 2.5 0 1 1 12 6a2.5 2.5 0 0 1 0 5Z"/></svg>',
    phone: '<svg viewBox="0 0 24 24" width="16" height="16"><path fill="currentColor" d="M6.6 10.8a15.1 15.1 0 0 0 6.6 6.6l2.2-2.2a1.5 1.5 0 0 1 1.5-.36c1.63.54 3.39.83 5.2.83a1 1 0 0 1 1 1V21a1 1 0 0 1-1 1C11.85 22 2 12.15 2 1a1 1 0 0 1 1-1h3.37a1 1 0 0 1 1 1c0 1.81.29 3.57.83 5.2.14.5.03 1.03-.36 1.42L6.6 10.8Z"/></svg>',
    mobile: '<svg viewBox="0 0 24 24" width="16" height="16"><path fill="currentColor" d="M7 2h10a2 2 0 0 1 2 2v16a2 2 0 0 1-2 2H7a2 2 0 0 1-2-2V4a2 2 0 0 1 2-2Zm0 3v14h10V5H7Zm5 14.75a1.25 1.25 0 1 0 0-2.5 1.25 1.25 0 0 0 0 2.5Z"/></svg>',
    fax: '<svg viewBox="0 0 24 24" width="16" height="16"><path fill="currentColor" d="M7 2h10v5h2a3 3 0 0 1 3 3v7a3 3 0 0 1-3 3H5a3 3 0 0 1-3-3v-7a3 3 0 0 1 3-3h2V2Zm2 5h6V4H9v3Zm10 5H5v5a1 1 0 0 0 1 1h12a1 1 0 0 0 1-1v-5Z"/></svg>',
    whatsapp: '<svg viewBox="0 0 24 24" width="16" height="16"><path fill="currentColor" d="M20.5 3.5A10 10 0 0 0 3.1 17.43L2 22l4.7-1.23A10 10 0 0 0 20.5 3.5Zm-8.4 15.4a8.2 8.2 0 0 1-4.18-1.15l-.3-.18-2.47.64.66-2.4-.2-.31A8.2 8.2 0 1 1 12.1 18.9Zm4-4.32c-.22-.11-1.3-.64-1.5-.71s-.35-.11-.5.11-.57.71-.69.86-.25.16-.47.06a6.62 6.62 0 0 1-1.94-1.2 7.24 7.24 0 0 1-1.34-1.66c-.14-.22 0-.34.1-.46l.33-.39c.11-.17.17-.28.25-.47s0-.35-.02-.5c-.05-.11-.5-1.21-.68-1.66s-.36-.38-.5-.39h-.43a.83.83 0 0 0-.6.28c-.2.22-.76.75-.76 1.84s.78 2.13.89 2.28a9.3 9.3 0 0 0 3.08 3c1.14.63 1.57.68 2.13.57a1.85 1.85 0 0 0 1.21-.85c.16-.23.26-.5.18-.62s-.2-.17-.42-.28Z"/></svg>',
    office: '<svg viewBox="0 0 24 24" width="16" height="16"><path fill="currentColor" d="M5 3h14v18H5V3Zm2 2v14h10V5H7Zm2 2h6v2H9V7Zm0 4h6v2H9v-2Zm0 4h6v2H9v-2Z"/></svg>',
    email: '<svg viewBox="0 0 24 24" width="16" height="16"><path fill="currentColor" d="M20 4H4a2 2 0 0 0-2 2v12a2 2 0 0 0 2 2h16a2 2 0 0 0 2-2V6a2 2 0 0 0-2-2Zm0 4-8 5L4 8V6l8 5 8-5v2Z"/></svg>'
  };

  function renderFooter(contact, dir) {
    const root = document.getElementById('footer-root');
    if (!root || !contact) return;

    root.setAttribute('dir', (dir || 'ltr').toLowerCase());
    root.className = 'site-footer';

    const items = (contact.items || []).map(it => {
      const icon = FOOTER_ICONS[it.type] || '';
      const value = it.type === 'email'
        ? `<a href="mailto:${it.value}">${it.value}</a>`
        : it.value;
      return `
        <li class="info-item">
          <span class="icon" aria-hidden="true">${icon}</span>
          <span class="text"><strong>${it.label}:</strong> ${value}</span>
        </li>`;
    }).join('');

   root.innerHTML = `
  <div class="footer-wrap">
    <div class="footer-col">
      <h3 class="footer-title">${contact.title || ''}</h3>
      <ul class="info-list" aria-label="${contact.title || ''}">
        ${items}
      </ul>
    </div>

    <div class="footer-col footer-brand">
      <img class="brand-logo" src="./Images/footerlogo.png" alt="Sajad Dates" />
      <p class="brand-note">${contact.brand_note || ''}</p>

      <div class="map-embed" aria-label="Factory location on Google Maps">
        <iframe
          src="https://www.google.com/maps?q=29.078386306762695,58.328067779541016&z=17&hl=en&output=embed"
          loading="lazy"
          referrerpolicy="no-referrer-when-downgrade" 
          allowfullscreen
        ></iframe>
      </div>

      <!-- Language switcher UNDER the map -->
      <nav id="lang-switch-footer" class="lang-switch" aria-label="Website language"></nav>
    </div>
  </div>

  <div class="footer-bottom">
    <p>© <span id="year"></span> SAJAD DATES — ${contact.copyright || ''}</p>
  </div>
`;

    const y = root.querySelector('#year');
    if (y) y.textContent = new Date().getFullYear();
  }
</script>


</html>